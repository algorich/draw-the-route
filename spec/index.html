<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script
      src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript">
    </script>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
    <script type="text/javascript" src="../lib/jquery.draw-the-route.js"> </script>
  </head>
  <body>
    <div id="map_canvas" style="width:100%; height:80%"></div>

    <div id="controls" style="padding: 20px;">
      <button id="close-route">Close route</button>

      <label for="attach_to_road">Attach to road</label>
      <input type="checkbox" id="attach-to-road">

      <button id="undo">Undo</button>

      <button id="export-data">Export data</button>

      <textarea cols='50' rows='3' id="agl-exported-data"></textarea>
    </div>

    <script type="text/javascript">
      $(function () {
        'use strict';

        var dtr = $('#map_canvas').drawTheRoute();

        $('#close-route').on('click', function () {
          dtr.closeRoute();
        });

        $('#attach-to-road').prop('checked', dtr.attachToRoad());

        $('#attach-to-road').on('change', function () {
          dtr.attachToRoad(this.checked);
        });

        $('#undo').on('click', function () {
          dtr.undo();
        });

        $('#export-data').on('click', function () {
          $('#agl-exported-data').text(JSON.stringify(dtr.exportData()));
        });
      });
    </script>
  </body>
</html>
